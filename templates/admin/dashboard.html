{% extends "base.html" %}

{% block content %}
<h2>üìä –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª</h2>

<div class="row">
    <div class="col-md-3">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">{{ users|length }}</h5>
                <p class="card-text">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-success">
            <div class="card-body">
                <h5 class="card-title">{{ products|length }}</h5>
                <p class="card-text">–ü—Ä–æ–¥—É–∫—Ç–∏</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-info">
            <div class="card-body">
                <h5 class="card-title">{{ orders|length }}</h5>
                <p class="card-text">–ü–æ—Ä—ä—á–∫–∏</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <h5 class="card-title">{{ "%.2f"|format(orders|sum(attribute='total')) }} –ª–≤.</h5>
                <p class="card-text">–û–±—â –ø—Ä–∏—Ö–æ–¥</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>–ë—ä—Ä–∑–∏ –¥–µ–π—Å—Ç–≤–∏—è</h5>
            </div>
            <div class="card-body">
                <a href="{{ url_for('admin.manage_products') }}" class="btn btn-primary me-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏</a>
                <a href="{{ url_for('admin.add_product_page') }}" class="btn btn-success">–î–æ–±–∞–≤–∏ –ø—Ä–æ–¥—É–∫—Ç</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>–ü–æ—Å–ª–µ–¥–Ω–∏ –ø–æ—Ä—ä—á–∫–∏</h5>
            </div>
            <div class="card-body">
                {% if orders %}
                    {% for order in orders[-5:]|reverse %}
                    <div class="border-bottom pb-2 mb-2">
                        <strong>–ü–æ—Ä—ä—á–∫–∞ #{{ order.id }}</strong><br>
                        <small>–°—É–º–∞: {{ "%.2f"|format(order.total) }} –ª–≤. | –°—Ç–∞—Ç—É—Å: {{ order.status }}</small>
                    </div>
                    {% endfor %}
                {% else %}
                    <p>–ù—è–º–∞ –ø–æ—Ä—ä—á–∫–∏ –≤—Å–µ –æ—â–µ.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}